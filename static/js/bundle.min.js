(function(){"use strict";function autoplay(){interval&&root.clearInterval(interval),interval=root.setInterval(function(){navigate(1)},3e3)}function navigate(delta){current.classList.remove("current"),pos+=delta,0>pos?pos=count-1:pos>=count&&(pos=0),current=items[pos],current.classList.add("current")}var interval,root=this,doc=root.document,carousel=doc.querySelector(".js-carousel"),next=carousel&&carousel.querySelector(".js-carousel-next"),prev=carousel&&carousel.querySelector(".js-carousel-prev"),pos=0,items=carousel&&carousel.querySelectorAll(".js-carousel-list .js-carousel-item")||[],count=items.length,current=items&&items[0];carousel&&(next.addEventListener("click",function(){navigate(1)},!1),prev.addEventListener("click",function(){navigate(-1)},!1),carousel.addEventListener("mouseenter",function(){root.clearInterval(interval)},!1),carousel.addEventListener("mouseleave",function(){autoplay()},!1),autoplay())}).call(this),function(){"use strict";function throttle(fn,delay){var lastRun;return function(){var time=(new Date).getTime();(!lastRun||time-lastRun>=delay)&&(fn.apply(null,arguments),lastRun=(new Date).getTime())}}function unhideLargeImg(){largeImg.style.opacity=1}function loadMediumCard(evt){var selector=".object-card-link",target=evt&&evt.target,link=target&&(target.matches(selector)?target:target.closest(selector)),href=link&&link.href,idx=link&&link.dataset.pos;link&&(card.style.backgroundImage="url("+href+")",card.scrollIntoView&&card.scrollIntoView(!1),pos=parseInt(idx,10),evt&&evt.preventDefault(),setLargeImg(link),openCarousel(evt))}function setLargeImg(link){function onload(){largeImgZoom.classList.remove("active"),largeImg.style.backgroundImage=largeImgZoom.style.backgroundImage="url("+href+")",largeImg.style.width=largeImgZoom.style.width=Math.floor(width)+"px",largeImg.style.height=largeImgZoom.style.height=Math.floor(height)+"px",largeImg.style.opacity="1",img.removeEventListener("load",onload)}var img,ratioH,ratioW,width=link&&parseInt(link.dataset.largeWidth,10),height=link&&parseInt(link.dataset.largeHeight,10),parent=largeImg.parentElement,parentRect=parent&&parent.getBoundingClientRect(),parentW=parent&&parentRect.width-200,parentH=parent&&parentRect.height-40,href=link.href.replace("medium","large");(width>parentW||height>parentH)&&(ratioH=parentH/height,ratioW=parentW/width,ratioW>ratioH?(height=parentH,width*=ratioH):(width=parentW,height*=ratioW)),largeImg.style.opacity=".2",img=new Image,img.addEventListener("load",onload,!1),img.src=href}function navigate(delta){var el;pos+=delta,pos=pos>last?0:0>pos?last:pos,el=items[pos],el&&setLargeImg(el)}function closeCarousel(evt){evt.preventDefault(),carousel.classList.remove("active"),doc.body.classList.remove("suppressed"),carouselVisible=!1}function openCarousel(evt){evt.preventDefault(),carousel.classList.add("active"),doc.body.classList.add("suppressed"),unhideLargeImg(),carouselVisible=!0}function onKeydown(evt){if(carouselVisible){if("Escape"===evt.key||27===evt.keyCode)return void closeCarousel(evt);if(evt.ctrlKey){if("ArrowLeft"===evt.key||37===evt.keyCode)return void navigate(-1);if("ArrowRight"===evt.key||39===evt.keyCode)return void navigate(1)}}}function activateCardZoom(evt){var zoom=evt.target.querySelector(".js-zoom"),link=items[pos],href=link.href.replace("medium","large");zoom.style.backgroundImage="url("+href+")",zoom.classList.add("active"),zoomImg||(zoomImg=new Image),zoomImg.src!==href&&(zoomImg.src=href)}function deactivateCardZoom(evt){var zoom=evt.target.querySelector(".js-zoom");zoom.classList.remove("active")}function panCardZoom(evt){if(zoomImg&&zoomImg.width&&zoomImg.height){var bgX,bgY,zoom=evt.currentTarget.querySelector(".js-zoom"),clH=zoom.clientHeight,clW=zoom.clientWidth,rect=zoom.getBoundingClientRect(),t=root.pageYOffset+rect.top,l=root.pageXOffset+rect.left,h=zoomImg.height,w=zoomImg.width,isV=zoomImg.height>zoomImg.width,ratio=isV?h/clH:w/clW,x=evt.pageX-l,y=evt.pageY-t,gapX=isV?parseInt((h-w)/2/ratio,10):10,gapY=isV?10:parseInt((w-h)/2/ratio,10);bgX=gapX>x?0:parseInt((x-gapX)*ratio,10),bgX=bgX>w-clW?w-clW:bgX,bgY=gapY>y?0:parseInt((y-gapY)*ratio,10),bgY=bgY>h-clH?h-clH:bgY,zoom.style.backgroundPosition="-"+bgX+"px -"+bgY+"px"}}var zoomImg,root=this,doc=root.document,object=doc.querySelector(".object"),cards=object&&object.querySelector(".object-cards"),card=cards&&cards.querySelector(".object-card"),nav=(cards&&cards.querySelector(".object-card-zoom"),doc.querySelector(".object-cards-nav")),items=nav&&nav.querySelectorAll(".object-card-link")||[],largeImg=object&&object.querySelector(".object-image"),largeImgZoom=object&&object.querySelector(".object-image-zoom"),carousel=object&&object.querySelector(".object-carousel"),next=carousel&&carousel.querySelector(".object-carousel-next"),prev=carousel&&carousel.querySelector(".object-carousel-prev"),close=carousel&&carousel.querySelector(".object-carousel-close"),carouselVisible=!1,pos=0,last=items.length-1;cards&&(doc.body.addEventListener("keydown",onKeydown,!1),nav.addEventListener("click",loadMediumCard,!1),card.addEventListener("click",openCarousel,!1),card.addEventListener("mouseenter",activateCardZoom,!1),card.addEventListener("mouseleave",deactivateCardZoom,!1),card.addEventListener("mousemove",throttle(panCardZoom,32),!1),largeImg.addEventListener("mouseenter",activateCardZoom,!1),largeImg.addEventListener("mouseleave",deactivateCardZoom,!1),largeImg.addEventListener("mousemove",throttle(panCardZoom,32),!1),close.addEventListener("click",closeCarousel,!1),next.addEventListener("click",function(){navigate(1)},!1),prev.addEventListener("click",function(){navigate(-1)},!1),root.addEventListener("resize",throttle(function(){setLargeImg(items[pos])},100),!1),setLargeImg(items[0]))}.call(this);